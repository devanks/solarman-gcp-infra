# functions/ingestor/src/main/resources/application.properties

# --- Spring Boot configuration import ---
# Enable loading properties from GCP Secret Manager using sm:// prefix
# Use 'optional:' so the app doesn't fail if Secret Manager isn't reachable during local tests (if not mocked)
spring.config.import=optional:sm://

# --- Logging ---
logging.level.dev.devanks.solarman.ingestor=INFO

# --- Application Info ---
info.app.name=Solarman Ingestor Function
info.app.version=@project.version@

# --- Ingestor Configuration Properties ---
# ingestor.gcp.project-id= # Optional: Auto-detected usually

ingestor.gcp.firestore-latest-document-id=latest
ingestor.gcp.solarman-api-url=https://globalhome.solarmanpv.com

# --- Solarman API Token ---
# Use sm:// prefix to inject the secret value directly.
# Format: sm://<secret-id>/<version> (Project ID is usually auto-detected)
# If auto-detection fails, use full path: sm://projects/<project-id>/secrets/<secret-id>/<version>
ingestor.gcp.solarman-api-token=${sm://solarman-bearer-token/latest}

# --- GCP Auto-configuration ---
# spring.cloud.gcp.project-id= # Explicitly set project ID if auto-detection fails
# spring.cloud.gcp.credentials.location= # Optional: Path to service account key file (e.g., file:/path/to/key.json) - ADC preferred

# --- Firestore ---
# spring.cloud.gcp.firestore.project-id= # Uses spring.cloud.gcp.project-id or auto-detect
# spring.cloud.gcp.firestore.database-id=(default) # <<< This is the default behavior, no need to set explicitly

